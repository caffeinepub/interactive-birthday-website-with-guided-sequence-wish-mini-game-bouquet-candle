{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Enforce valid deployment domain/slug formatting in frontend metadata",
  "requirements": [
    {
      "id": "REQ-26",
      "summary": "Ensure any deployment domain/slug value derived from the app’s frontend metadata is always 5–50 chars and contains only letters, numbers, and hyphens to prevent go-live validation failures.",
      "acceptanceCriteria": [
        "Deploy/go-live succeeds without the domain validation error.",
        "The chosen domain/slug is 5–50 characters long.",
        "The chosen domain/slug contains only letters (A–Z, a–z), numbers (0–9), and hyphens (-).",
        "Domain/slug strings with spaces, underscores, or emojis are rejected/avoided so deployment cannot be attempted with invalid input."
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update the document <title> to a compliant, stable slug-like string (5–50 chars; only letters/numbers/hyphens) so any platform logic deriving the deployment domain/slug from the title cannot generate invalid values."
        },
        {
          "path": "frontend/src/utils/deploymentSlug.ts",
          "operation": "create",
          "description": "Add a small utility to validate and sanitize deployment slugs (enforce length 5–50 and allowed characters A–Z/a–z/0–9/-; strip/replace spaces/underscores/emojis and normalize consecutive hyphens) for consistent reuse across the app."
        },
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Set/override document.title at runtime using a safe constant slug (validated/sanitized via the new utility) to ensure the final title used in the deployed build is always compliant even if other build-time metadata changes."
        }
      ]
    }
  ]
}